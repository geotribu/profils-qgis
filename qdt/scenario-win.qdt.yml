metadata:
  title: "Scénario de déploiement des profils Geotribu"
  id: scenario-geotribu-win32
  description: >-
    Scénario QGIS Deployment Toolbelt pour déployer les profils de Geotribu sur Windows.

settings:
  DEBUG: false
  SCENARIO_VALIDATION: true

steps:
  - name: Variables d'environnement persistantes
    uses: manage-env-vars
    with:
      - name: QDT_SCENARIO
        value: GEOTRIBU_WIN32
        scope: "user"
        action: "add"

  - name: Synchronisation des profils depuis le dépôt public
    uses: qprofiles-manager
    with:
      action: download
      source: https://github.com/geotribu/profils-qgis.git
      protocol: git
      local_destination: ~/.cache/qgis-deployment-toolbelt/Geotribu

  - name: Créer des raccourcis pour les profils
    uses: shortcuts-manager
    with:
      action: create_or_restore
      include:
        - profile: geotribu_tuto_ferrargis
          label: "QGIS - Conf QGIS FR"
          additional_arguments: "--noversioncheck"
          desktop: false
          start_menu: true
          icon: "logo_ferrari.ico"
          qgis_path: "%PROGRAMFILES%/QGIS 3.22/bin/qgis-ltr-bin.exe"
